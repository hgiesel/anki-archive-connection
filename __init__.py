#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Anki Add-on: Anki Context

Please do not edit this file unless you know what you are doing.

Copyright: (c) 2019 Henrik Giesel <https://github.com/hgiesel>
License: GNU AGPLv3 <https://www.gnu.org/licenses/agpl.html>
"""
import importlib.util

if importlib.util.find_spec('aqt') is not None:
    from .lib import context

elif __name__ == '__main__':
    import os
    from lib.parser import setup_parser, setup_config
    from lib.main import FUNCTION_DICT

    CONFIG = setup_config(os.path.dirname(os.readlink(__file__)))
    PARSER, SUBPARSER_DICT = setup_parser(CONFIG)

    ARGV = PARSER.parse_args()

    if ARGV.cmd is not None:
      FUNCTION_DICT[ARGV.cmd](CONFIG,
          ARGV,
          SUBPARSER_DICT[ARGV.cmd].error) # error printer for parser
